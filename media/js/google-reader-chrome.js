// Generated by CoffeeScript 1.5.0
var bp, callback, login, onAuthorized;

bp = chrome.extension.getBackgroundPage();

callback = function(resp, xhr) {
  return importFromGoogleReader(JSON.parse(xhr.response).subscriptions);
};

onAuthorized = function() {
  var request, url;
  url = 'https://www.google.com/reader/api/0/subscription/list';
  request = {
    method: 'GET',
    parameters: {
      'output': 'json'
    }
  };
  bp.oauth.sendSignedRequest(url, callback, request);
  $("#googleConnector").unbind("click");
  $("#googleConnector").attr("value", "logout");
  return $("#googleConnector").on("click", function() {
    bp.oauth.clearTokens();
    $("#googleConnector").unbind("click");
    $("#googleConnector").on("click", login2);
    return $("#googleConnector").attr("value", "Connect to Google Reader");
  });
};

login = function() {
  return bp.oauth.authorize(onAuthorized);
};
